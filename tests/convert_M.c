#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <stdint.h>

#include "../bigint.h"


int main(){

    char* M_little_end = 
    "11010011000001000011111110111100010001110011010101111110000100011011111010000011000"
    "10010001000000101100000011100111000100110011100011110000100011010100100001100010110"
    "11011101111001111110111100001101010010110110011101000010110000001011011011011100001"
    "10000110000110001100111010010111101110111010111000100100010101110110010011001101001"
    "10000111101000001100011011111100001000010001100011110010010100010010010010111011010"
    "01101100101111111100100011000001101110000110111001100101011000001100111010111001101"
    "00110101101010011111011001010100001111001111000100000101001000010010110101000101100"
    "01101000000111111011101000111110110001100110111100001001111010100101010100010000101"
    "11100101000011010110001101000011100101000101111111001000011001110110010110100011010"
    "11111110100101001111100110001000000101001101011110001011001100111000100111110110001"
    "10000100011111011111100101100001100101010001101000110011001000011010110001100000011"
    "00001101001101011110001000100110000111010100110011101011000110111011101011001010010"
    "00111000111100100010111110100110111110100001001010011011011001000110101110001100011"
    "01010110111110111101110111111000111111110110000001100011001101000010010110011111101"
    "01100000101010111100110100000101101101101011100110110000110100000110110001011110110"
    "01000100001010110001011111111011000010101111100010001101000000001101101010000011001"
    "01101111001110011111111011011011101111110011000101011100100011000111111011010000101"
    "11110101001111111111101100011000101101000001001000101110101000110001101000001011010"
    "11111011001010100111010010101100111101100001011010010010101001110000101101010001010"
    "01111010000000101011000110111011001100100100000100000100000010100010000000111010011"
    "00111010011011010100000101001000010001010100010100010111101000100101010110110001001"
    "11010000001011110001001111100111110101001000110010110101110000100101101111100100101"
    "10001111000101011011110111100110000001110010011100001101111010110010001010110001000"
    "00001111000111111111010111111110111011100000111101111011010111110000101110110111100"
    "11011111000101101100101000000000010110101110011100001101000010110000111000111111100"
    "10001011111010000001011010110010110101010100010011001000000000110011000110111110110"
    "10110101001110001101111001001010010011001111100011110110010100100001011101111001101"
    "10111110011011101101011101101001001100001010111001111001101101110000000111101101111"
    "11000111110010011011101110011001011011111001101001010111100111110110100001011010111"
    "10111100011000010110100011111011101010001010001100110001011100111010111100101100110"
    "10000100111001011101001011101001001001011000001100011011100011000011111100010010111"
    "10001011101001110111110111111100100011110010101110001010111011001010010001011001011"
    "10000000010110000101100010111011101101101111001000111011110011101000111111000100001"
    "11100001001100000010101001100010100011111000011100101100100111010111100100011101010"
    "10001001010001011101110101011001111010011000001010110001010010110000111000011000100"
    "00011000010111101001101100101110101101001110111001110101111010101100010111001110101"
    "011110011011001010101000010001100010000011001010010001000100011101101001011101111001"
    ;
    
    char* Q_little_end =
    "110101010000011100100110000100011001000111001100101010010111110100101000000101000000"
    "001110001111000001101101010110010000100110101101011101010101101110010011010111101000"
    "110011100100111000001101100010001100101011100010100011110100010111001101010001001010"
    "01100101011101111100110010100101111010001110000111111101000010010010"
    ;
    
    uint32_t M_bytes = 384, Q_bytes = 40;
    
    char *M_big_end = malloc(384*8*sizeof(char))
        ,*Q_big_end = malloc(40 *8*sizeof(char))
         ;
    
    memset(M_big_end, 0x00, 384*8*sizeof(char));
    memset(Q_big_end, 0x00, 40 *8*sizeof(char));
    
    bitstring_switch_endian(M_little_end, 384, M_big_end);
    bitstring_switch_endian(Q_little_end, 40,  Q_big_end);

    struct bigint M_BIGEND, Q_BIGEND, M_LITTLEEND, Q_LITTLEEND, ONE, AUX1, AUX2, REM;
    
    bigint_create_from_string(&M_BIGEND, 3200, M_big_end, (384 * 8));
    bigint_create_from_string(&Q_BIGEND, 3200, Q_big_end, (40  * 8));
    
    bigint_create_from_string(&M_LITTLEEND, 3200, M_little_end, (384 * 8));
    bigint_create_from_string(&Q_LITTLEEND, 3200, Q_little_end, (40  * 8));    
    
    bigint_create(&ONE,  3200, 1);
    bigint_create(&AUX1, 3200, 0);
    bigint_create(&AUX2, 3200, 0);
    bigint_create(&REM,  3200, 0);
    
    printf("M in big endian:\n");
    bigint_print_all_bits(&M_BIGEND);
    bigint_print_info(&M_BIGEND);
    
    printf("\n\nQ in big endian:\n");
    bigint_print_all_bits(&Q_BIGEND);
    bigint_print_info(&Q_BIGEND);   

    bigint_sub2(&M_LITTLEEND, &ONE, &AUX1);
    
    bigint_div2(&AUX1, &Q_LITTLEEND, &AUX2, &REM);
    
    printf("Should be ZERO remainder:\n");
    bigint_print_all_bits(&REM);
    bigint_print_info(&REM);
    return 0; 
}







